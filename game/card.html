<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>EANO Card Game</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
      background: #0c0f16;
      color: white;
      overflow: hidden;
    }
    .screen {
      display: none;
      height: 100vh;
      width: 100vw;
      align-items: center;
      justify-content: center;
      flex-direction: column;
    }
    .show {
      display: flex;
    }
    .avatar-selection img {
      height: 100px;
      margin: 10px;
      border: 2px solid transparent;
      border-radius: 50%;
      cursor: pointer;
      transition: 0.3s;
    }
    .avatar-selection img:hover {
      border: 2px solid #4fc3f7;
    }
    .card {
      background: #1e1e2f;
      border: 2px solid #4fc3f7;
      padding: 8px;
      border-radius: 10px;
      margin: 5px;
      min-width: 50px;
      font-size: 13px;
      text-align: center;
      font-weight: bold;
    }
    .game-board {
      display: flex;
      flex-direction: column;
      height: 100vh;
      justify-content: space-between;
    }
    .top-row, .bottom-row {
      display: flex;
      align-items: center;
      justify-content: space-around;
      padding: 10px;
    }
    .middle-row {
      text-align: center;
    }
    .ai-avatar img, .player-avatar img {
      height: 80px;
      border-radius: 50%;
    }
    .bubble {
      background: #333;
      color: #fff;
      padding: 5px 10px;
      border-radius: 20px;
      margin-top: 10px;
      max-width: 200px;
      font-size: 14px;
    }
    .hand {
      overflow-x: auto;
      display: flex;
      padding: 10px;
    }
    .hand .card {
      cursor: pointer;
    }
    .deck, .play-area {
      margin-top: 10px;
    }
  </style>
</head>
<body>

<!-- Screen 1: Avatar Selection -->
<div id="avatar-screen" class="screen show">
  <h2>Select Your Avatar</h2>
  <div class="avatar-selection">
    <img src="avatars/1.png" onclick="selectAvatar('avatars/1.png')">
    <img src="avatars/2.png" onclick="selectAvatar('avatars/2.png')">
  </div>
</div>

<!-- Screen 2: Game -->
<div id="game-screen" class="screen">
  <div class="game-board">

    <!-- AI Section -->
    <div class="top-row">
      <div class="ai-avatar">
        <img src="avatars/2.png" id="aiAvatar">
        <div id="aiBubble" class="bubble">Ready?</div>
      </div>
      <div class="deck">
        <div class="card" id="deckCard">Market üõç</div>
      </div>
    </div>

    <!-- Middle -->
    <div class="middle-row">
      <div class="play-area">
        <div class="card" id="playCard">Start</div>
      </div>
    </div>

    <!-- Player Section -->
    <div class="bottom-row">
      <div class="player-avatar">
        <img src="" id="playerAvatar">
        <div class="bubble" id="playerBubble">Your move</div>
      </div>
    </div>
    <div class="hand" id="playerHand"></div>
  </div>
</div>

<script>
  const playerHand = document.getElementById("playerHand");
  const playCard = document.getElementById("playCard");
  const aiBubble = document.getElementById("aiBubble");
  const playerBubble = document.getElementById("playerBubble");
  const deckCard = document.getElementById("deckCard");

  const playerCards = [];
  const aiCards = [];
  const cardNames = [
  "TrustScore üéñ",
  "Studio üéô",
  "Community ü´Ç",
  "Mainnet üåê",
  "Marketplace üõç",
  "Pick 2 üîÅ",
  "Hold On ‚è©",
  "Suspension üõë"
];
  const aiEmotes = ["Hmm...", "Nice move!", "Oh no!", "You got me!", "Play fast üòà"];

  let isPlayerTurn = true;

  function selectAvatar(src) {
    document.getElementById("playerAvatar").src = src;
    document.getElementById("game-screen").classList.add("show");
    document.getElementById("avatar-screen").classList.remove("show");
    initGame();
  }

  function drawCard() {
    const name = cardNames[Math.floor(Math.random() * cardNames.length)];
    const number = Math.floor(Math.random() * 14) + 1;
    return { name, number };
  }

  function renderHand() {
  playerHand.innerHTML = '';
  playerCards.forEach((card, index) => {
    const div = document.createElement("div");
    div.className = "card";
    div.innerText = `${card.name}\n${card.number}`;
    
    div.onclick = () => {
      if (!isPlayerTurn) return;

      const valid = card.name === currentCard.name || card.number === currentCard.number;

      if (valid || ["Pick 2 üîÅ", "Suspension üõë", "Hold On ‚è©"].includes(card.name)) {
        currentCard = card;
        playCard.innerText = `${card.name}\n${card.number}`;
        playerCards.splice(index, 1);
        renderHand();
        playerBubble.innerText = `You played ${card.name}`;

        // Handle special cards
        if (card.name === "Pick 2 üîÅ") {
          aiCards.push(drawCard(), drawCard());
          aiBubble.innerText = "üò† Picked 2!";
        } else if (card.name === "Suspension üõë") {
          aiBubble.innerText = "üòë Skipped!";
          setTimeout(() => {
            isPlayerTurn = true;
            playerBubble.innerText = "Go again!";
          }, 1000);
          return; // skip AI turn
        } else if (card.name === "Hold On ‚è©") {
          playerBubble.innerText = "You get another turn üîÅ";
          return; // play again
        }

        isPlayerTurn = false;
        aiTurn();
      } else {
        playerBubble.innerText = "‚ùå Invalid move";
      }
    };

    playerHand.appendChild(div);
  });
  }

  let currentCard;

  function aiTurn() {
    setTimeout(() => {
      const playable = aiCards.find(card => card.name === currentCard.name || card.number === currentCard.number);
      if (playable) {
        currentCard = playable;
        playCard.innerText = `${playable.name}\n${playable.number}`;
        aiBubble.innerText = aiEmotes[Math.floor(Math.random() * aiEmotes.length)];
        const index = aiCards.indexOf(playable);
        aiCards.splice(index, 1);
      } else {
        aiBubble.innerText = "Going to Market...";
        aiCards.push(drawCard());
      }
      isPlayerTurn = true;
      playerBubble.innerText = "Your move";
    }, 1000);
  }

  function initGame() {
    deckCard.onclick = () => {
  if (!isPlayerTurn) return;

  const newCard = drawCard();
  playerCards.push(newCard);
  renderHand();
  playerBubble.innerText = "You drew a card üÉè";

  // Still ends your turn even if you draw
  isPlayerTurn = false;
  aiTurn();
};
    for (let i = 0; i < 4; i++) {
      playerCards.push(drawCard());
      aiCards.push(drawCard());
    }
    currentCard = drawCard();
    playCard.innerText = `${currentCard.name}\n${currentCard.number}`;
    renderHand();
  }
</script>

</body>
  </html>
