<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Welcome to EANO</title>

  <!-- SEO -->
  <meta name="description" content="Join the next-generation digital mining platform. Secure, fast, and user-powered." />
  <meta name="keywords" content="EANO Coin, digital mining, crypto app, mining platform, web3 miner, secure wallet" />
  <meta name="author" content="EANO Project Team" />
  <meta name="robots" content="index, follow" />

  <!-- Open Graph for Social Media -->
  <meta property="og:title" content="EANO Coin ‚Äì Secure Digital Mining" />
  <meta property="og:description" content="Mine digital coins with EANO. A next-gen platform for global users." />
  <meta property="og:image" content="https://eano-app.netlify.app/assets/icon-512x512.png" />
  <meta property="og:url" content="https://eano-app.netlify.app/" />
  <meta property="og:type" content="website" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="EANO Coin ‚Äì Secure Digital Mining" />
  <meta name="twitter:description" content="Start mining securely with EANO. Instant rewards and global network." />
  <meta name="twitter:image" content="https://eano-app.netlify.app/assets/icon-512x512.png" />

  <!-- PWA Manifest & Icons -->
  <link rel="manifest" href="/manifest.json" />
  <link rel="icon" href="/assets/icon-192x192.png" />
  <link rel="shortcut icon" href="/assets/icon-192x192.png" />
  <link rel="apple-touch-icon" href="/assets/icon-512x512.png" />
  <meta name="theme-color" content="#111010" />

  <style>
    body {
      margin: 0;
      background: linear-gradient(135deg, #0b0c2a, #1a0142);
      color: white;
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      text-align: center;
      padding: 20px;
      overflow: hidden;
      position: relative;
    }

    h1.glow-title {
      font-size: 2.5rem;
      font-weight: bold;
      margin-bottom: 20px;
      color: #ffd700;
      text-shadow: 0 0 5px #ffd700, 0 0 10px #ffd700, 0 0 15px #ff0;
      animation: glow 2s ease-in-out infinite alternate, fadeSlideIn 1.5s ease-out forwards;
      opacity: 0;
    }

    @keyframes glow {
      from {
        text-shadow: 0 0 5px #ffd700, 0 0 10px #ffd700, 0 0 15px #ff0;
      }
      to {
        text-shadow: 0 0 10px #ffd700, 0 0 20px #ffd700, 0 0 30px #ff0;
      }
    }

    @keyframes fadeSlideIn {
      0% { opacity: 0; transform: translateY(-30px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    .message-box {
      max-width: 600px;
      font-size: 1.2rem;
      opacity: 0;
      transition: opacity 1s ease, transform 1s ease;
      transform: translateY(20px);
    }

    .message-box.show {
      opacity: 1;
      transform: translateY(0);
    }

    #skip-btn {
      position: absolute;
      top: 20px;
      right: 20px;
      background: gold;
      border: none;
      color: black;
      font-weight: bold;
      padding: 10px 15px;
      border-radius: 6px;
      cursor: pointer;
      z-index: 10;
    }

    #progress-bar {
      width: 80%;
      height: 6px;
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      overflow: hidden;
      position: absolute;
      bottom: 30px;
    }

    #progress-bar-fill {
      height: 100%;
      width: 0%;
      background: gold;
      transition: width 1s linear;
    }
  </style>
</head>
<body>
  <button id="skip-btn">Skip</button>

  <h1 class="glow-title">WELCOME TO <span>‚ú®Ô∏èEANO</span></h1>

  <div id="message" class="message-box" aria-live="polite"></div>

  <div id="progress-bar">
    <div id="progress-bar-fill"></div>
  </div>

  <audio id="welcome-audio" src="ttsMP3.com_VoiceText_2025-7-24_17-16-8.mp3" autoplay preload="auto"></audio>

  <script type="module">
    import { auth, onAuthStateChanged } from './auth.js';
    import { db, doc, updateDoc } from './firebase.js';

    const messages = [
      "Welcome to the EANO Project.",
      "This is more than just a crypto platform ‚Äî it's a movement built on trust, fairness, and digital resilience.",
      "Here, every user earns crypto daily through simple mining and genuine engagement, not expensive hardware.",
      "You are joining a community designed to reward transparency, loyalty, and participation.",
      "You'll unlock powerful tools ‚Äî like your Trust Score and Mining Level, which grow with your activity and integrity.",
      "Explore our Community Hub, invite teammates, and compete on the Leaderboard to increase your impact.",
      "Coming soon:",
      "üìà The EANO Studio to build apps.",
      "üéÆ A gaming portal that pays with EANO.",
      "üõçÔ∏è A Marketplace that runs on real crypto.",
      "And so much more ‚Äî all decentralized, all user-first.",
      "EANO is not just a platform. It‚Äôs a future we build together.",
      "Start mining. Grow your influence. Earn your digital freedom."
    ];

    const delays = [0, 4, 9, 14, 20, 26, 32, 34, 38, 42, 46, 50, 55]; // seconds
    const messageBox = document.getElementById("message");
    const audio = document.getElementById("welcome-audio");
    const progressFill = document.getElementById("progress-bar-fill");
    const skipBtn = document.getElementById("skip-btn");

    // Fallback autoplay for mobile
    window.addEventListener('load', () => {
      audio.play().catch(() => {
        console.warn("Autoplay blocked. User interaction required.");
      });
    });

    // Show messages in sequence
    for (let i = 0; i < messages.length; i++) {
      setTimeout(() => {
        messageBox.textContent = messages[i];
        messageBox.classList.remove("show");
        void messageBox.offsetWidth; // reflow for animation
        messageBox.classList.add("show");
        progressFill.style.width = `${Math.round((delays[i] / 60) * 100)}%`;
      }, delays[i] * 1000);
    }

    // Update seenWelcome and redirect
    async function completeWelcome() {
      const user = auth.currentUser;
      if (user) {
        await updateDoc(doc(db, 'users', user.uid), { seenWelcome: true });
      }
      window.location.href = 'dashboard.html';
    }

    // Final redirect after narration
    const totalDuration = 60 * 1000;
    setTimeout(() => {
      completeWelcome();
    }, totalDuration + 1000);

    // Skip button
    skipBtn.addEventListener('click', () => {
      audio.pause();
      completeWelcome();
    });

    // Redirect if not authenticated
    onAuthStateChanged(auth, (user) => {
      if (!user) {
        window.location.href = 'index.html';
      }
    });
  </script>
</body>
  </html>
